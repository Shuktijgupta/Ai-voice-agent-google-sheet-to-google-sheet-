# ðŸš€ Quick Start: Self-Hosted Voice Agent

Get your **fully self-hosted voice AI agent** working in 5 minutes!

## âœ… What You Already Have

- âœ… Ollama (Local LLM) - Running and ready
- âœ… Model: llama3.2:3b - Installed
- âœ… Application - Running

## ðŸ“‹ What You Need

1. **Twilio Account** (Free trial available)
   - Sign up: https://twilio.com
   - Get phone number
   - Get credentials

## âš¡ Quick Setup (5 Minutes)

### Step 1: Get Twilio Credentials

1. Go to https://twilio.com and sign up (free trial)
2. Get a phone number (free trial number available)
3. Copy these from Twilio Console:
   - Account SID
   - Auth Token
   - Phone Number (e.g., +1234567890)

### Step 2: Add to .env

Add these lines to your `.env` file:

```env
# Twilio Configuration
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890

# App URL (for webhooks - use ngrok for local testing)
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### Step 3: Expose Your App (For Webhooks)

Twilio needs to reach your app. For local development:

**Option A: Use ngrok (Recommended)**
```bash
# Install ngrok
brew install ngrok  # macOS
# or download from https://ngrok.com

# Expose your app
ngrok http 3000

# Copy the HTTPS URL (e.g., https://abc123.ngrok.io)
# Update .env:
NEXT_PUBLIC_APP_URL=https://abc123.ngrok.io
```

**Option B: Deploy to Vercel/Railway**
- Deploy your app
- Use the deployed URL in `NEXT_PUBLIC_APP_URL`

### Step 4: Test It!

1. **Set Provider:**
   - Go to Settings/Integrations
   - Select "Self-Hosted Voice Agent" as default provider

2. **Make a Call:**
   - Go to Drivers page
   - Click "AI Call" button
   - The agent will:
     - Call the driver
     - Speak using AI (Ollama)
     - Listen to responses
     - Record the call
     - Generate transcript
     - Create summary

## ðŸŽ¯ What Happens During a Call

1. **Call Initiated** â†’ Twilio dials the number
2. **Agent Speaks** â†’ Ollama generates greeting, Twilio TTS speaks it
3. **User Responds** â†’ Twilio ASR transcribes speech
4. **AI Processes** â†’ Ollama generates intelligent response
5. **Agent Responds** â†’ Twilio TTS speaks the response
6. **Conversation Continues** â†’ Steps 3-5 repeat
7. **Call Ends** â†’ Recording saved, transcript generated, summary created

## ðŸ“Š What Gets Saved

After each call, you get:

- âœ… **Call Recording** (URL from Twilio)
- âœ… **Full Transcript** (conversation text)
- âœ… **Call Summary** (generated by Ollama)
- âœ… **Extracted Answers** (parsed by Ollama)
- âœ… **Call Duration** (in seconds)
- âœ… **Call Status** (completed/failed)

## ðŸ’° Cost

**Free Trial:**
- Twilio: $15.50 free credit
- ~1000 minutes of calls

**After Trial:**
- Twilio phone number: ~$1/month
- Call minutes: ~$0.01-0.02/minute
- **No AI service costs!** (Ollama is free)

## ðŸ”§ Troubleshooting

### "Voice agent not configured"
- Check `.env` has all 3 Twilio variables
- Restart the app: `npm run dev`

### "Webhook not reachable"
- Use ngrok for local testing
- Or deploy to Vercel/Railway

### "Call not connecting"
- Verify phone number format: +1234567890
- Check Twilio account has credits
- Verify webhook URL is accessible

## ðŸŽ‰ You're Done!

Your self-hosted voice agent is now:
- âœ… Making calls automatically
- âœ… Speaking intelligently (Ollama)
- âœ… Understanding responses
- âœ… Recording everything
- âœ… Generating transcripts
- âœ… Creating summaries

**All without paying for AI services!**

## ðŸ“š Next Steps (Optional)

Want to make it even more local?

1. **Replace Twilio TTS with local TTS:**
   - Install Piper TTS
   - Update webhook to use local TTS

2. **Replace Twilio ASR with local ASR:**
   - Install Whisper.cpp
   - Update webhook to use local ASR

3. **See:** `SELF_HOSTED_VOICE_AGENT_SETUP.md` for full local setup






